
import { fetch, fetchJsonp, setUrlSearchParams, setFormData, fetchGet, fetchPost } from './index';

// 数据请求示例
class RequestManager {
  /**
   * get 请求例子
   */
  static fetchGet1(data) {
    let u = setUrlSearchParams(data);
    return fetch('/video/v5video/item/search.htm?' + u, {
      credentials: 'include'
    });
  }

  /**
   * post 请求例子
   */
  static fetchPost1(data) {
    return fetch('/video/v5video/item/add.htm', {
      method: 'POST',
      body: setFormData(data),
      credentials: 'include'
    });
  }

  /**
   * jsonp 请求例子
   */
  static fetchJsonpSample(tags) {
    return fetchJsonp('/common/jsonp/getTagName.htm?', {tags: tags});
  }

  static fetchGet2(data) {
    return fetchGet('/video/v5video/item/search.htm?', data);
  }

  static fetchPost2(data) {
    return fetchPost('/video/v5video/item/add.htm', data);
  }

  static getToken() {
    return fetchGet('/common/getToken.json');
  }

  static setChannelKey(data){
    return fetchPost(`/cms/main/page_setup/channel/changeKey.json`, data)
  }

}

RequestManager.getToken()
.then(data => console.log('=======fetchGet====== ', data));

RequestManager.setChannelKey({id: 1, name: 'haha'})
.then(data => console.log('=======fetchPost====== ', data));

RequestManager.fetchGet1()
.then(data => console.log('=======fetchGet====== ', data));

RequestManager.fetchPost1()
.then(data => console.log('=======fetchPost====== ', data));

RequestManager.fetchJsonpSample('5')
.then(data => console.log('=======getTagName====== ', data));

RequestManager.fetchGet2()
.then(data => console.log('=======fetchGet====== ', data));

RequestManager.fetchPost2()
.then(data => console.log('=======fetchPost====== ', data));

